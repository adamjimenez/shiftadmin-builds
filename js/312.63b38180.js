"use strict";(self["webpackChunkshiftadmin"]=self["webpackChunkshiftadmin"]||[]).push([[312],{14312:function(e,t,l){l.r(t),l.d(t,{default:function(){return P}});var a=l(56768),o=l(24232),i=l(45130),n=l(31969),s=l(13892),d=l(4189),r=l(93745),u=l(30697),c=l(40276),b=l(20396),p=l(91772),m=l(418),f=l(95272),h=l(22162),k=l(32421),v=l(41720),F=l(69915),g=l(57254),y=l(4913),D=l(97505),_=l(20552),V=l(49930),C=l(20105),S=l(51146),x=l(10381),W=l(76686),O=l(43948),w=l(53740);const U={class:"w-100"},X={key:2},A={key:3},E={key:1},T=(0,a.Lk)("br",null,null,-1),$={key:0},Q={key:2},J={key:3},j={key:4};function I(e,t,l,I,K,q){const N=(0,a.g2)("draggable");return(0,a.uX)(),(0,a.CE)("div",U,[(0,a.bF)(x.h,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=t=>e.tab=t)},{default:(0,a.k6)((()=>[(0,a.bF)(W.U,{value:"tables"},{default:(0,a.k6)((()=>[(0,a.eW)("Tables")])),_:1}),(0,a.bF)(W.U,{value:"sections"},{default:(0,a.k6)((()=>[(0,a.eW)("Sections")])),_:1}),(0,a.bF)(W.U,{value:"options"},{default:(0,a.k6)((()=>[(0,a.eW)("Options")])),_:1}),(0,a.bF)(W.U,{value:"general"},{default:(0,a.k6)((()=>[(0,a.eW)("General")])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)(d.J,{loading:e.loading},{default:(0,a.k6)((()=>[e.error?((0,a.uX)(),(0,a.Wv)(n.l,{key:0,type:"error",text:e.error},null,8,["text"])):(0,a.Q3)("",!0),(0,a.bF)(r.S,null,{default:(0,a.k6)((()=>["tables"!==e.tab?((0,a.uX)(),(0,a.Wv)(s.D,{key:0,color:"primary",variant:"flat",onClick:q.save,disabled:!e.dirty},{default:(0,a.k6)((()=>[(0,a.eW)("Save")])),_:1},8,["onClick","disabled"])):(0,a.Q3)("",!0),"tables"===e.tab?((0,a.uX)(),(0,a.Wv)(s.D,{key:1,icon:"mdi-plus",onClick:t[1]||(t[1]=t=>{e.table={},e.tableDialog=!0})})):(0,a.Q3)("",!0),"sections"===e.tab?((0,a.uX)(),(0,a.CE)("span",X,[(0,a.bF)(s.D,{icon:"mdi-plus",onClick:t[2]||(t[2]=t=>{e.section={},e.sectionDialog=!0})}),(0,a.bF)(s.D,{icon:"mdi-sort",title:"Sort",onClick:t[3]||(t[3]=t=>q.openSectionSortable(e.data.vars.sections))})])):(0,a.Q3)("",!0),"options"===e.tab?((0,a.uX)(),(0,a.CE)("span",A,[(0,a.bF)(s.D,{icon:"mdi-plus",onClick:t[4]||(t[4]=t=>{e.option={name:""},e.optionDialog=!0})})])):(0,a.Q3)("",!0)])),_:1}),"tables"===e.tab?((0,a.uX)(),(0,a.CE)("div",E,[(0,a.bF)(u.O,null,{default:(0,a.k6)((()=>[(0,a.eW)(" These are the database tables which can be used to create administratable sections in the CMS."),T,(0,a.eW)(" Any changes will instantly affect the database so make sure that you have a back-up. ")])),_:1}),(0,a.bF)(m.$t,{style:{"max-width":"600px"}},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.data.tables,((l,n)=>((0,a.uX)(),(0,a.Wv)(f.c,{modelValue:e.panel,"onUpdate:modelValue":t[5]||(t[5]=t=>e.panel=t),multiple:"",key:n},{default:(0,a.k6)((()=>[(0,a.bF)(h.w,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(n),1),(0,a.bF)(v.h),(0,a.bF)(s.D,{icon:"mdi-plus",onClick:(0,i.D$)((t=>{e.field={name:"",type:"text",table:n},e.fieldDialog=!0}),["stop"])},null,8,["onClick"]),(0,a.bF)(s.D,{icon:"mdi-sort",title:"Sort",onClick:(0,i.D$)((e=>q.openSortable(n,l)),["stop"])},null,8,["onClick"]),(0,a.bF)(s.D,{icon:"mdi-pencil",onClick:(0,i.D$)((t=>{e.table={id:n,name:n},e.tableDialog=!0}),["stop"])},null,8,["onClick"]),(0,a.bF)(s.D,{icon:"mdi-delete",onClick:(0,i.D$)((e=>q.deleteTable(n)),["stop"])},null,8,["onClick"])])),_:2},1024),(0,a.bF)(k.T,null,{default:(0,a.k6)((()=>[(0,a.bF)(d.J,null,{default:(0,a.k6)((()=>[(0,a.bF)(F.x8,null,{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l,((t,l)=>((0,a.uX)(),(0,a.Wv)(g.g,{key:l,value:l},{append:(0,a.k6)((()=>[(0,a.bF)(s.D,{icon:"mdi-pencil",onClick:(0,i.D$)((l=>{e.field={...t},e.field.id=t.name,e.field.table=n,e.field.required=t.required>0,e.fieldDialog=!0}),["stop"])},null,8,["onClick"]),(0,a.bF)(s.D,{icon:"mdi-delete",onClick:(0,i.D$)((e=>q.deleteField(n,t.name)),["stop"])},null,8,["onClick"])])),default:(0,a.k6)((()=>[(0,a.bF)(y.U,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(t.name),1),t.required>0?((0,a.uX)(),(0,a.CE)("strong",$,"*")):(0,a.Q3)("",!0)])),_:2},1024),(0,a.bF)(D.w,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(t.type),1)])),_:2},1024)])),_:2},1032,["value"])))),128))])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["modelValue"])))),128))])),_:1})])):(0,a.Q3)("",!0),"sections"===e.tab?((0,a.uX)(),(0,a.CE)("div",Q,[(0,a.bF)(u.O,null,{default:(0,a.k6)((()=>[(0,a.eW)(" Sections are areas that can be administered. They are derived from tables or ad-hoc pages and can also contain subsections. ")])),_:1}),(0,a.bF)(m.$t,{modelValue:e.panel,"onUpdate:modelValue":t[6]||(t[6]=t=>e.panel=t),multiple:"",style:{"max-width":"600px"}},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.data.vars.sections,((t,l)=>((0,a.uX)(),(0,a.Wv)(f.c,{key:l,value:l},{default:(0,a.k6)((()=>[(0,a.bF)(h.w,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(t)+" ",1),(0,a.bF)(v.h),(0,a.bF)(s.D,{icon:"mdi-plus",onClick:(0,i.D$)((l=>{e.subsection={section:t},e.subsectionDialog=!0}),["stop"])},null,8,["onClick"]),(0,a.bF)(s.D,{icon:"mdi-sort",title:"Sort",onClick:(0,i.D$)((l=>q.openSectionSortable(e.data.vars.subsections[t])),["stop"]),disabled:!e.data.vars.subsections[t]||!e.data.vars.subsections[t].length},null,8,["onClick","disabled"]),(0,a.bF)(s.D,{icon:"mdi-pencil",onClick:(0,i.D$)((a=>{e.section={section:t,index:l},e.sectionDialog=!0}),["stop"])},null,8,["onClick"]),(0,a.bF)(s.D,{icon:"mdi-delete",onClick:(0,i.D$)((e=>q.deleteSection(l)),["stop"])},null,8,["onClick"])])),_:2},1024),(0,a.bF)(k.T,null,{default:(0,a.k6)((()=>[(0,a.bF)(F.x8,{"max-width":"600"},{default:(0,a.k6)((()=>[e.data.vars.subsections?((0,a.uX)(!0),(0,a.CE)(a.FK,{key:0},(0,a.pI)(e.data.vars.subsections[t],((l,o)=>((0,a.uX)(),(0,a.Wv)(g.g,{key:o,title:l},{append:(0,a.k6)((()=>[(0,a.bF)(s.D,{icon:"mdi-pencil",onClick:(0,i.D$)((a=>{e.subsection={section:t,subsection:l,index:o},e.subsectionDialog=!0}),["stop"])},null,8,["onClick"]),(0,a.bF)(s.D,{icon:"mdi-delete",onClick:(0,i.D$)((e=>q.deleteSubsection(t,o)),["stop"])},null,8,["onClick"])])),_:2},1032,["title"])))),128)):(0,a.Q3)("",!0)])),_:2},1024)])),_:2},1024)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"])])):(0,a.Q3)("",!0),"options"===e.tab?((0,a.uX)(),(0,a.CE)("div",J,[(0,a.bF)(u.O,null,{default:(0,a.k6)((()=>[(0,a.eW)(" Options are used by dropdown menus. They can either be a list of values or rows from a table. ")])),_:1}),(0,a.bF)(F.x8,{"max-width":"600"},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.data.vars.options,((e,t,l)=>((0,a.uX)(),(0,a.Wv)(g.g,{key:l,value:t,title:t},{append:(0,a.k6)((()=>[(0,a.bF)(s.D,{icon:"mdi-pencil",onClick:(0,i.D$)((e=>q.editOption(t)),["stop"])},null,8,["onClick"]),(0,a.bF)(s.D,{icon:"mdi-delete",onClick:(0,i.D$)((e=>q.deleteOption(t)),["stop"])},null,8,["onClick"])])),_:2},1032,["value","title"])))),128))])),_:1})])):(0,a.Q3)("",!0),"general"===e.tab?((0,a.uX)(),(0,a.CE)("div",j,[(0,a.bF)(u.O,null,{default:(0,a.k6)((()=>[(0,a.eW)(" Customise the look of the CMS and where automatic emails are sent from. ")])),_:1}),(0,a.bF)(O.W,{label:"From email",modelValue:e.data.from_email,"onUpdate:modelValue":t[7]||(t[7]=t=>e.data.from_email=t)},null,8,["modelValue"]),(0,a.bF)(O.W,{label:"Title",modelValue:e.data.vars.branding.title,"onUpdate:modelValue":t[8]||(t[8]=t=>e.data.vars.branding.title=t)},null,8,["modelValue"]),(0,a.bF)(O.W,{label:"Primary",modelValue:e.data.vars.branding.colors.primary,"onUpdate:modelValue":t[9]||(t[9]=t=>e.data.vars.branding.colors.primary=t),type:"color"},null,8,["modelValue"]),(0,a.bF)(O.W,{label:"Secondary",modelValue:e.data.vars.branding.colors.secondary,"onUpdate:modelValue":t[10]||(t[10]=t=>e.data.vars.branding.colors.secondary=t),type:"color"},null,8,["modelValue"])])):(0,a.Q3)("",!0)])),_:1},8,["loading"]),(0,a.bF)(p.p,{modelValue:e.tableDialog,"onUpdate:modelValue":t[12]||(t[12]=t=>e.tableDialog=t),"max-width":"600"},{default:(0,a.k6)((()=>[(0,a.bF)(d.J,{title:"Table"},{default:(0,a.k6)((()=>[(0,a.bF)(u.O,null,{default:(0,a.k6)((()=>[e.error?((0,a.uX)(),(0,a.Wv)(n.l,{key:0,type:"error",text:e.error},null,8,["text"])):(0,a.Q3)("",!0),(0,a.bF)(O.W,{label:"Name",modelValue:e.table.name,"onUpdate:modelValue":t[11]||(t[11]=t=>e.table.name=t)},null,8,["modelValue"])])),_:1}),(0,a.bF)(r.S,null,{default:(0,a.k6)((()=>[(0,a.bF)(s.D,{variant:"flat",color:"primary",disabled:""===e.table.name,onClick:q.saveTable},{default:(0,a.k6)((()=>[(0,a.eW)("Save")])),_:1},8,["disabled","onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)(p.p,{modelValue:e.fieldDialog,"onUpdate:modelValue":t[17]||(t[17]=t=>e.fieldDialog=t),"max-width":"600"},{default:(0,a.k6)((()=>[(0,a.bF)(d.J,{title:"Field"},{default:(0,a.k6)((()=>[(0,a.bF)(u.O,null,{default:(0,a.k6)((()=>[e.error?((0,a.uX)(),(0,a.Wv)(n.l,{key:0,type:"error",text:e.error},null,8,["text"])):(0,a.Q3)("",!0),(0,a.bF)(O.W,{label:"Name",modelValue:e.field.name,"onUpdate:modelValue":t[13]||(t[13]=t=>e.field.name=t)},null,8,["modelValue"]),(0,a.bF)(C.d4,{label:"Field",modelValue:e.field.type,"onUpdate:modelValue":t[14]||(t[14]=t=>e.field.type=t),items:e.fieldTypes},null,8,["modelValue","items"]),(0,a.bF)(O.W,{label:"Label",modelValue:e.field.label,"onUpdate:modelValue":t[15]||(t[15]=t=>e.field.label=t)},null,8,["modelValue"]),(0,a.bF)(c.a,{label:"Required",modelValue:e.field.required,"onUpdate:modelValue":t[16]||(t[16]=t=>e.field.required=t)},null,8,["modelValue"])])),_:1}),(0,a.bF)(r.S,null,{default:(0,a.k6)((()=>[(0,a.bF)(s.D,{variant:"flat",color:"primary",disabled:""===e.field.name,onClick:q.saveField},{default:(0,a.k6)((()=>[(0,a.eW)("Save")])),_:1},8,["disabled","onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)(p.p,{modelValue:e.sortFieldsDialog,"onUpdate:modelValue":t[20]||(t[20]=t=>e.sortFieldsDialog=t),"max-width":"600",scrollable:""},{default:(0,a.k6)((()=>[(0,a.bF)(d.J,{title:"Sort Field Order"},{default:(0,a.k6)((()=>[(0,a.bF)(u.O,null,{default:(0,a.k6)((()=>[(0,a.bF)(N,{modelValue:e.sortOrder,"onUpdate:modelValue":t[18]||(t[18]=t=>e.sortOrder=t),group:"items",onStart:t[19]||(t[19]=t=>e.drag=!0),onEnd:q.moveField,"item-key":"name"},{item:(0,a.k6)((({element:e})=>[(0,a.bF)(S.i,{color:"primary",class:"ma-5 pa-5"},{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(e.name),1)])),_:2},1024)])),_:1},8,["modelValue","onEnd"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)(p.p,{modelValue:e.sortSectionsDialog,"onUpdate:modelValue":t[22]||(t[22]=t=>e.sortSectionsDialog=t),"max-width":"600",scrollable:""},{default:(0,a.k6)((()=>[(0,a.bF)(d.J,{title:"Sort Section Order"},{default:(0,a.k6)((()=>[(0,a.bF)(u.O,null,{default:(0,a.k6)((()=>[(0,a.bF)(N,{list:e.sortOrder,group:"items","item-key":"",onEnd:t[21]||(t[21]=t=>e.dirty=!0)},{item:(0,a.k6)((({element:e})=>[(0,a.bF)(S.i,{color:"primary",class:"ma-5 pa-5"},{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(e),1)])),_:2},1024)])),_:1},8,["list"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)(p.p,{modelValue:e.sectionDialog,"onUpdate:modelValue":t[24]||(t[24]=t=>e.sectionDialog=t),"max-width":"600"},{default:(0,a.k6)((()=>[(0,a.bF)(d.J,{title:"Section"},{default:(0,a.k6)((()=>[(0,a.bF)(u.O,null,{default:(0,a.k6)((()=>[e.error?((0,a.uX)(),(0,a.Wv)(n.l,{key:0,type:"error",text:e.error},null,8,["text"])):(0,a.Q3)("",!0),(0,a.bF)(b.A,{label:"Section",modelValue:e.section.section,"onUpdate:modelValue":t[23]||(t[23]=t=>e.section.section=t),items:Object.keys(e.data.tables)},null,8,["modelValue","items"])])),_:1}),(0,a.bF)(r.S,null,{default:(0,a.k6)((()=>[(0,a.bF)(s.D,{variant:"flat",color:"primary",disabled:""===e.section.section,onClick:q.saveSection},{default:(0,a.k6)((()=>[(0,a.eW)("Edit")])),_:1},8,["disabled","onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)(p.p,{modelValue:e.subsectionDialog,"onUpdate:modelValue":t[26]||(t[26]=t=>e.subsectionDialog=t),"max-width":"600"},{default:(0,a.k6)((()=>[(0,a.bF)(d.J,{title:"Subsection"},{default:(0,a.k6)((()=>[(0,a.bF)(u.O,null,{default:(0,a.k6)((()=>[e.error?((0,a.uX)(),(0,a.Wv)(n.l,{key:0,type:"error",text:e.error},null,8,["text"])):(0,a.Q3)("",!0),(0,a.bF)(b.A,{label:"Subsection",modelValue:e.subsection.subsection,"onUpdate:modelValue":t[25]||(t[25]=t=>e.subsection.subsection=t),items:e.data.vars.sections},null,8,["modelValue","items"])])),_:1}),(0,a.bF)(r.S,null,{default:(0,a.k6)((()=>[(0,a.bF)(s.D,{variant:"flat",color:"primary",disabled:""===e.subsection.section,onClick:q.saveSubsection},{default:(0,a.k6)((()=>[(0,a.eW)("Edit")])),_:1},8,["disabled","onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)(p.p,{modelValue:e.optionDialog,"onUpdate:modelValue":t[31]||(t[31]=t=>e.optionDialog=t),"max-width":"600"},{default:(0,a.k6)((()=>[(0,a.bF)(d.J,{title:"Option"},{default:(0,a.k6)((()=>[(0,a.bF)(u.O,null,{default:(0,a.k6)((()=>[e.error?((0,a.uX)(),(0,a.Wv)(n.l,{key:0,type:"error",text:e.error},null,8,["text"])):(0,a.Q3)("",!0),(0,a.bF)(O.W,{label:"Name",modelValue:e.option.name,"onUpdate:modelValue":t[27]||(t[27]=t=>e.option.name=t)},null,8,["modelValue"]),(0,a.bF)(V.$,{modelValue:e.option.type,"onUpdate:modelValue":t[28]||(t[28]=t=>e.option.type=t)},{default:(0,a.k6)((()=>[(0,a.bF)(_.i,{label:"Table",value:"table"}),(0,a.bF)(_.i,{label:"Options",value:"options"})])),_:1},8,["modelValue"]),"table"===e.option.type?((0,a.uX)(),(0,a.Wv)(C.d4,{key:1,label:"table",modelValue:e.option.options,"onUpdate:modelValue":t[29]||(t[29]=t=>e.option.options=t),items:e.data.vars.tables},null,8,["modelValue","items"])):"options"===e.option.type?((0,a.uX)(),(0,a.Wv)(w.J,{key:2,label:"Options",modelValue:e.option.options,"onUpdate:modelValue":t[30]||(t[30]=t=>e.option.options=t)},null,8,["modelValue"])):(0,a.Q3)("",!0)])),_:1}),(0,a.bF)(r.S,null,{default:(0,a.k6)((()=>[(0,a.bF)(s.D,{variant:"flat",color:"primary",disabled:""===e.option.name,onClick:q.saveOption},{default:(0,a.k6)((()=>[(0,a.eW)("Edit")])),_:1},8,["disabled","onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}l(44114);var K=l(74300),q=l(61527),N=l.n(q),M={components:{draggable:N()},props:{vars:null},data:function(){return{tab:"tables",panel:[],table:{},tableDialog:!1,field:{},fieldDialog:!1,data:{},error:"",loading:!1,fieldTypes:["avg_rating","checkbox","checkboxes","color","combo","coords","date","datetime","decimal","deleted","dob","editor","email","file","files","hidden","id","integer","ip","mobile","month","page_name","password","polygon","position","postcode","radio","rating","read","select","select_multiple","select_parent","tel","text","textarea","time","timestamp","upload","uploads","url"],drag:!1,sortFieldsDialog:!1,sortTable:"",sortOrder:[],sectionDialog:!1,section:{},subsectionDialog:!1,subsection:{},optionDialog:!1,option:{},sortSectionsDialog:!1,dirty:!1}},methods:{fetchData:async function(){const e=await K.A.get("config.php");let t=e.data;t.vars||(t.vars={}),t.vars.subsections||(t.vars.subsections={}),t.vars.branding||(t.vars.branding={}),t.vars.branding.colors&&!Array.isArray(t.vars.branding.colors)||(t.vars.branding.colors={}),this.data=t,await this.$nextTick();let l=t.vars?.branding?.title?t.vars.branding.title:"ADMIN";document.title=l+" | Configure",this.dirty=!1},save:async function(){this.error="",this.loading=!0;const e=await K.A.post("config.php?cmd=save",this.data);this.loading=!1,e.data.error?this.error=e.data.error:(await this.fetchData(),this.$emit("saveConfig"))},saveTable:async function(){this.error="",this.loading=!0;const e=await K.A.post("config.php?cmd=save_table",this.table);this.loading=!1,e.data.error?this.error=e.data.error:(this.tableDialog=!1,this.fetchData())},deleteTable:async function(e){if(!confirm("Drop table "+e))return;this.error="",this.loading=!0;const t=await K.A.post("config.php?cmd=delete_table",{table:e});this.loading=!1,t.data.error?this.error=t.data.error:this.fetchData()},saveField:async function(){this.error="",this.loading=!0;const e=await K.A.post("config.php?cmd=save_field",this.field);this.loading=!1,e.data.error?this.error=e.data.error:(this.fieldDialog=!1,this.fetchData())},deleteField:async function(e,t){if(!confirm("Drop field "+t+" from "+e))return;this.error="",this.loading=!0;const l=await K.A.post("config.php?cmd=delete_field",{table:e,field:t});this.loading=!1,l.data.error?this.error=l.data.error:this.fetchData()},openSortable:function(e,t){this.sortOrder=[...t],this.sortTable=e,this.sortFieldsDialog=!0},openSectionSortable:function(e){this.sortOrder=e,this.sortSectionsDialog=!0},moveField:async function(e){let t=this.sortOrder[e.newIndex].name,l=e.newIndex?this.sortOrder[e.newIndex-1].name:"";this.error="",this.loading=!0;const a=await K.A.post("config.php?cmd=move_field",{table:this.sortTable,field:t,after:l});this.loading=!1,a.data.error?this.error=a.data.error:this.fetchData()},saveSection:function(){let e=this.section.section.replaceAll("_"," ");Object.hasOwn(this.section,"index")?this.data.vars.sections[this.section.index]=e:this.data.vars.sections.push(e),this.sectionDialog=!1,this.dirty=!0},deleteSection:function(e){confirm("Delete section")&&(this.data.vars.sections.splice(e,1),this.dirty=!0)},saveSubsection:function(){let e=this.subsection.subsection.replaceAll("_"," ");Object.hasOwn(this.subsection,"index")?this.data.vars.subsections[this.subsection.section][this.subsection.index]=e:(Array.isArray(this.data.vars.subsections[this.subsection.section])||(this.data.vars.subsections[this.subsection.section]=[]),this.data.vars.subsections[this.subsection.section].push(e)),this.subsectionDialog=!1,this.dirty=!0},deleteSubsection:function(e,t){confirm("Delete subsection")&&(this.data.vars.subsections[e].splice(t,1),this.dirty=!0)},renameObjKey:function(e,t,l){const a=Object.keys(e),o=a.reduce(((a,o)=>(o===t?a[l]=e[t]:a[o]=e[o],a)),{});return o},optionsToString:function(e){let t="";if(Array.isArray(e))e.forEach((function(e){t+=e+"\n"}));else if("object"===typeof e)for(let[l,a]of Object.entries(e))t+=l.replace("#","")+"="+a+"\n";else t=e;return t},editOption:function(e){this.option={name:e,index:e,type:"options"},"string"===typeof this.data.vars.options[e]&&(this.option.type="table"),this.option.options=this.optionsToString(this.data.vars.options[e]),this.optionDialog=!0,this.dirty=!0},saveOption:function(){let e;if("table"===this.option.type)e=this.option.options;else{let t=this.option.options.split("\n");e=t[0].includes("=")?{}:[],t.forEach((t=>{if(Array.isArray(e))e.push(t);else{let l=t.split("=");e[l[0]]=l[1]}}))}Object.hasOwn(this.option,"index")&&(this.data.vars.options=this.renameObjKey(this.data.vars.options,this.option.index,this.option.name)),this.data.vars.options[this.option.name]=e,this.optionDialog=!1,this.dirty=!0},deleteOption:function(e){confirm("Delete option")&&(delete this.data.vars.options[e],this.dirty=!0)}},watch:{vars:function(){this.fetchData()},data:{handler:function(){this.dirty=!0},deep:!0}},async mounted(){this.vars.sections&&this.fetchData()}},L=l(71241);const G=(0,L.A)(M,[["render",I]]);var P=G}}]);
//# sourceMappingURL=312.63b38180.js.map