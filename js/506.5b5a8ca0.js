"use strict";(self["webpackChunkshiftadmin"]=self["webpackChunkshiftadmin"]||[]).push([[506],{2564:function(e,t,l){l(560);var a=l(1006),o=l(108);t.Z={getOptions:async function(e){let t=[];if(Array.isArray(e))e.forEach((function(e){t.push({title:e,value:e})}));else if(e){if("string"===typeof e){const t=await a.Z.get("?cmd=options&table="+e);e=t.data.options}for(const[l,a]of Object.entries(e))t.push({title:a,value:l})}return t.sort(((e,t)=>e.title.localeCompare(t.title))),t},getAllOptions:async function(e,t,l,a){let o={};for(const[,r]of Object.entries(e))if(["select","select_parent","select_multiple"].includes(r.type)){let e="select_parent"===r.type?l:t.options[r.column.replaceAll(" ","_")];o[r.column]=await this.getOptions(e),"select_multiple"===r.type&&Array.isArray(a[r.column])&&a[r.column].reverse().forEach((e=>{o[r.column].some((t=>t.value===e))||o[r.column].unshift({value:e,title:e})}))}else"combo"===r.type&&(o[r.column]=[]);return o},base:function(){let e="/";return o.Z.router.currentRoute.value.params.base&&(e+=o.Z.router.currentRoute.value.params.base+"/"),e}}},6506:function(e,t,l){l.r(t),l.d(t,{default:function(){return b}});var a=l(3396),o=l(7771),r=l(870),s=l(1489),n=l(1888),i=l(1334),u=l(6422),d=l(165);function c(e,t,l,c,p,m){return(0,a.wg)(),(0,a.j4)(u.O,{ref:"form",modelValue:e.valid,"onUpdate:modelValue":t[2]||(t[2]=t=>e.valid=t)},{default:(0,a.w5)((()=>[(0,a.Wm)(s._,{title:"ShiftAdmin",subtitle:"Sign in",loading:e.loading},{default:(0,a.w5)((()=>[e.error?((0,a.wg)(),(0,a.j4)(o.w,{key:0,type:"error",text:e.error},null,8,["text"])):(0,a.kq)("",!0),(0,a.Wm)(n.Z,null,{default:(0,a.w5)((()=>[(0,a.Wm)(d.h,{modelValue:e.email,"onUpdate:modelValue":t[0]||(t[0]=t=>e.email=t),rules:e.usernameRules,label:"Email",required:""},null,8,["modelValue","rules"]),(0,a.Wm)(d.h,{type:"password",modelValue:e.password,"onUpdate:modelValue":t[1]||(t[1]=t=>e.password=t),rules:e.passwordRules,label:"Password",required:""},null,8,["modelValue","rules"])])),_:1}),(0,a.Wm)(i.h,null,{default:(0,a.w5)((()=>[(0,a.Wm)(r.T,{color:"success",onClick:m.login,variant:"flat",text:"Login"},null,8,["onClick"])])),_:1})])),_:1},8,["loading"])])),_:1},8,["modelValue"])}l(560);var p=l(1006),m=l(2564),v={data:()=>({valid:!0,email:"",password:"",usernameRules:[e=>!!e||"Username is required"],passwordRules:[e=>!!e||"Password is required"],loading:!1,error:""}),methods:{login:async function(){this.error="";var e={cmd:"login",email:this.email,password:this.password};this.loading=!0;const t=await p.Z.post("?cmd=login",e);this.loading=!1,t.data.error?this.error=t.data.error:this.$router.push(m.Z.base())}}},f=l(89);const y=(0,f.Z)(v,[["render",c]]);var b=y},7771:function(e,t,l){l.d(t,{w:function(){return A}});var a=l(3396),o=l(1114);const r=(0,o.J)("v-alert-title");var s=l(870),n=l(836),i=l(3289),u=l(2370),d=l(9166),c=l(9694),p=l(4544),m=l(2465),v=l(4960),f=l(9637),y=l(5180),b=l(489),h=l(8717),g=l(4231),w=l(1138),k=l(5935),V=l(5221),_=l(4870),C=l(3766),W=l(1107);const x=["success","info","warning","error"],S=(0,C.U)({border:{type:[Boolean,String],validator:e=>"boolean"===typeof e||["top","end","bottom","start"].includes(e)},borderColor:String,closable:Boolean,closeIcon:{type:v.lE,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:e=>x.includes(e)},...(0,d.l)(),...(0,c.f)(),...(0,p.x)(),...(0,m.c)(),...(0,y.y)(),...(0,b.F)(),...(0,g.I)(),...(0,w.Q)(),...(0,k.x$)(),...(0,V.bk)({variant:"flat"})},"VAlert"),A=(0,W.ev)()({name:"VAlert",props:S(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{emit:l,slots:o}=t;const d=(0,h.z)(e,"modelValue"),v=(0,a.Fl)((()=>{if(!1!==e.icon)return e.type?e.icon??`$${e.type}`:e.icon})),w=(0,a.Fl)((()=>({color:e.color??e.type,variant:e.variant}))),{themeClasses:C}=(0,k.ER)(e),{colorClasses:W,colorStyles:x,variantClasses:S}=(0,V.c1)(w),{densityClasses:A}=(0,c.t)(e),{dimensionStyles:F}=(0,p.$)(e),{elevationClasses:O}=(0,m.Y)(e),{locationStyles:R}=(0,y.T)(e),{positionClasses:U}=(0,b.K)(e),{roundedClasses:Z}=(0,g.b)(e),{textColorClasses:$,textColorStyles:z}=(0,u.rY)((0,_.Vh)(e,"borderColor")),{t:B}=(0,f.bU)(),j=(0,a.Fl)((()=>({"aria-label":B(e.closeLabel),onClick(e){d.value=!1,l("click:close",e)}})));return()=>{const t=!(!o.prepend&&!v.value),l=!(!o.title&&!e.title),u=!(!o.close&&!e.closable);return d.value&&(0,a.Wm)(e.tag,{class:["v-alert",e.border&&{"v-alert--border":!!e.border,[`v-alert--border-${!0===e.border?"start":e.border}`]:!0},{"v-alert--prominent":e.prominent},C.value,W.value,A.value,O.value,U.value,Z.value,S.value,e.class],style:[x.value,F.value,R.value,e.style],role:"alert"},{default:()=>[(0,V.Ux)(!1,"v-alert"),e.border&&(0,a.Wm)("div",{key:"border",class:["v-alert__border",$.value],style:z.value},null),t&&(0,a.Wm)("div",{key:"prepend",class:"v-alert__prepend"},[o.prepend?(0,a.Wm)(n.z,{key:"prepend-defaults",disabled:!v.value,defaults:{VIcon:{density:e.density,icon:v.value,size:e.prominent?44:28}}},o.prepend):(0,a.Wm)(i.t,{key:"prepend-icon",density:e.density,icon:v.value,size:e.prominent?44:28},null)]),(0,a.Wm)("div",{class:"v-alert__content"},[l&&(0,a.Wm)(r,{key:"title"},{default:()=>[o.title?.()??e.title]}),o.text?.()??e.text,o.default?.()]),o.append&&(0,a.Wm)("div",{key:"append",class:"v-alert__append"},[o.append()]),u&&(0,a.Wm)("div",{key:"close",class:"v-alert__close"},[o.close?(0,a.Wm)(n.z,{key:"close-defaults",defaults:{VBtn:{icon:e.closeIcon,size:"x-small",variant:"text"}}},{default:()=>[o.close?.({props:j.value})]}):(0,a.Wm)(s.T,(0,a.dG)({key:"close-btn",icon:e.closeIcon,size:"x-small",variant:"text"},j.value),null)])]})}}})},6422:function(e,t,l){l.d(t,{O:function(){return p}});var a=l(3396),o=l(9166),r=l(4357),s=l(3185),n=l(4870),i=l(3766),u=l(1107),d=l(9888);const c=(0,i.U)({...(0,o.l)(),...(0,r.vC)()},"VForm"),p=(0,u.ev)()({name:"VForm",props:c(),emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,t){let{slots:l,emit:o}=t;const i=(0,r.Np)(e),u=(0,n.iH)();function c(e){e.preventDefault(),i.reset()}function p(e){const t=e,l=i.validate();t.then=l.then.bind(l),t.catch=l.catch.bind(l),t.finally=l.finally.bind(l),o("submit",t),t.defaultPrevented||l.then((e=>{let{valid:t}=e;t&&u.value?.submit()})),t.preventDefault()}return(0,d.L)((()=>(0,a.Wm)("form",{ref:u,class:["v-form",e.class],style:e.style,novalidate:!0,onReset:c,onSubmit:p},[l.default?.(i)]))),(0,s.F)(i,u)}})}}]);
//# sourceMappingURL=506.5b5a8ca0.js.map