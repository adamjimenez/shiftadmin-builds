{"version":3,"file":"js/556.bf0c5b61.js","mappings":"mMACSA,MAAA,sBAA4BC,MAAM,4B,EAD3C,Q,0CACIC,EAAAA,EAAAA,IAIM,MAJNC,EAIM,CAHqCC,EAAAC,YAAS,WAAhDC,EAAAA,EAAAA,IAAsEC,EAAAA,EAAA,CAF9EC,IAAA,EAE2BC,cAAA,OAF3BC,EAAAA,EAAAA,IAAA,OAIsBN,EAAAO,SAAM,WAApBT,EAAAA,EAAAA,IAAoG,UAJ5GM,IAAA,EAI+BI,IAAKC,EAAAC,SAAUb,MAAM,4BAA6Bc,UAAOC,EAAA,KAAAA,EAAA,OAAAC,IAAEb,EAAAc,SAAAd,EAAAc,WAAAD,K,QAJ1FE,KAAAT,EAAAA,EAAAA,IAAA,Q,wDAaA,GACIU,KAAM,WACF,MAAO,CACHT,OAAQ,GACRN,WAAW,EAEnB,EACAgB,iBAAAA,GACIC,KAAKC,SAAU,CACnB,EACAC,SAAU,CACNV,SAAU,WACN,IAAIW,EAASH,KAAKI,OAAOC,MACzBF,EAAOG,MAAQ,EAEf,IAAIC,EAAcC,IAAAA,UAAaR,KAAKI,OAAOC,OAE3C,OAAOL,KAAKX,OAAS,SAAWW,KAAKI,OAAOD,OAAOM,SAAW,IAAMF,CACxE,GAEJG,QAAS,CACLC,eAAgB,SAAUf,GAOtB,GANAgB,QAAQC,IAAIjB,EAAQE,MAEhBF,EAAQE,KAAKgB,IACbd,KAAKe,QAAQC,KAAKpB,EAAQE,KAAKgB,IAG/BlB,EAAQE,KAAKmB,IAAK,CAClB,IAAIH,EAAKlB,EAAQE,KAAKmB,IAEtB,GAAIH,EAAGI,SAAS,OAEZ,YADAC,SAASC,KAAON,GAIpBA,EAAKO,EAAAA,EAAKC,OAASR,EAAGS,QAAQvB,KAAKX,OAAS,UAAUmC,QAEtDxB,KAAKe,QAAQC,KAAKF,EACtB,CAEuC,mBAA5BlB,EAAQE,KAAK2B,YACpBzB,KAAK0B,MAAM,UAAW9B,EAAQE,MAGE,mBAAzBF,EAAQE,KAAKG,UACpBD,KAAKjB,UAAYa,EAAQE,KAAKG,QAEtC,GAEJ0B,MAAO,CACHnC,SAAU,WACNQ,KAAKjB,WAAY,CACrB,GAEJ,aAAM6C,GACG,CAAC,MAAO,WAAY,SAASV,SAASG,EAAAA,EAAKQ,eAKhD7B,KAAKX,OAASyC,EAAAA,EAAIC,YAClBC,OAAOC,iBAAiB,UAAWjC,KAAKW,gBAExCX,KAAK0B,MAAM,eAAgB,KAPvB1B,KAAKe,QAAQC,KAAKK,EAAAA,EAAKC,OAAS,UAQxC,EACAY,aAAAA,GACIF,OAAOG,oBAAoB,UAAWnC,KAAKW,eAC/C,G,WC5EJ,MAAMyB,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,O","sources":["webpack://shiftadmin/./src/components/IframePage.vue","webpack://shiftadmin/./src/components/IframePage.vue?db86"],"sourcesContent":["<template>\n    <div style=\"position: relative;\" class=\"d-flex flex-column W-100\">\n        <v-progress-linear indeterminate v-if=\"isLoading\"></v-progress-linear>\n\n        <iframe v-if=\"webUrl\" :src=\"frameUrl\" class=\"grow w-100 h-100 border-0\" @message=\"message\"></iframe>\n    </div>\n</template>\n\n<script>\nimport api from \"../services/api\";\nimport util from \"../services/util\";\nimport qs from 'qs';\n\nexport default {\n    data: function () {\n        return {\n            webUrl: '',\n            isLoading: false,\n        };\n    },\n    beforeRouteUpdate () {\n        this.loading = true;\n    },\n    computed: {\n        frameUrl: function () {\n            let params = this.$route.query;\n            params.frame = 1;\n\n            let paramString = qs.stringify(this.$route.query);\n\n            return this.webUrl + 'admin/' + this.$route.params.catchAll + '?' + paramString;\n        }\n    },\n    methods: {\n        receiveMessage: function (message) { \n            console.log(message.data);\n\n            if (message.data.to) {\n                this.$router.push(message.data.to);\n            }\n            \n            if (message.data.url) {\n                let to = message.data.url;\n\n                if (to.includes('://')) {                    \n                    location.href = to;\n                    return;\n                }\n                \n                to = util.base() + to.substr((this.webUrl + 'admin/').length);\n\n                this.$router.push(to);\n            }\n            \n            if (typeof message.data.fullScreen === 'boolean') {\n                this.$emit('message', message.data);\n            }\n            \n            if (typeof message.data.loading === 'boolean') {\n                this.isLoading = message.data.loading;\n            }\n        },\n    },\n    watch: {\n        frameUrl: function () {\n            this.isLoading = true;\n        }\n    },\n    async mounted() {\n        if (!['Pro', 'Business', 'Trial'].includes(util.getEdition())) {\n            this.$router.push(util.base() + 'upgrade');\n            return;\n        }\n\n        this.webUrl = api.getWebUrl();\n        window.addEventListener('message', this.receiveMessage);\n\n        this.$emit('changeFields', []);\n    },\n    beforeUnmount() {\n        window.removeEventListener('message', this.receiveMessage);\n    }, \n}\n</script>","import { render } from \"./IframePage.vue?vue&type=template&id=86ce3dce\"\nimport script from \"./IframePage.vue?vue&type=script&lang=js\"\nexport * from \"./IframePage.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["style","class","_createElementBlock","_hoisted_1","_ctx","isLoading","_createBlock","_component_v_progress_linear","key","indeterminate","_createCommentVNode","webUrl","src","$options","frameUrl","onMessage","_cache","args","message","_hoisted_2","data","beforeRouteUpdate","this","loading","computed","params","$route","query","frame","paramString","qs","catchAll","methods","receiveMessage","console","log","to","$router","push","url","includes","location","href","util","base","substr","length","fullScreen","$emit","watch","mounted","getEdition","api","getWebUrl","window","addEventListener","beforeUnmount","removeEventListener","__exports__","render"],"sourceRoot":""}