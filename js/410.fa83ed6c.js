"use strict";(self["webpackChunkshiftadmin"]=self["webpackChunkshiftadmin"]||[]).push([[410],{52186:function(e,t,l){l.r(t),l.d(t,{default:function(){return Ce}});var a=l(56768),o=l(24232),i=l(45130),n=l(80266),s=l(42807),r=l(4189),d=l(93745),u=l(30697),c=l(40276),p=l(20396),b=l(91772),v=l(19262),f=l(12858),m=l(34690),h=l(54663),g=l(47664),y=l(90144),k=l(14587),x=l(51247),F=l(74600);const V=Symbol.for("vuetify:v-expansion-panel"),C=["default","accordion","inset","popout"],_=(0,k.j)({color:String,flat:Boolean,focusable:Boolean,static:Boolean,tile:Boolean,variant:{type:String,default:"default",validator:e=>C.includes(e)},readonly:Boolean,...(0,v.u)(),...(0,m.gL)(),...(0,h.X)(),...(0,g.yx)()},"VExpansionPanels"),S=(0,x.RW)()({name:"VExpansionPanels",props:_(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:l}=t;(0,m.dB)(e,V);const{themeClasses:o}=(0,g.NX)(e),i=(0,a.EW)((()=>e.variant&&`v-expansion-panels--variant-${e.variant}`));return(0,f.Uh)({VExpansionPanel:{color:(0,y.lW)(e,"color"),readonly:(0,y.lW)(e,"readonly")},VExpansionPanelTitle:{focusable:(0,y.lW)(e,"focusable"),static:(0,y.lW)(e,"static")}}),(0,F.C)((()=>(0,a.bF)(e.tag,{class:["v-expansion-panels",{"v-expansion-panels--flat":e.flat,"v-expansion-panels--tile":e.tile},o.value,i.value,e.class],style:e.style},l))),{}}});l(44114);var D=l(59562),W=l(38139);const w=(0,k.j)({...(0,v.u)(),...(0,W.f)()},"VExpansionPanelText"),E=(0,x.RW)()({name:"VExpansionPanelText",props:w(),setup(e,t){let{slots:l}=t;const o=(0,a.WQ)(V);if(!o)throw new Error("[Vuetify] v-expansion-panel-text needs to be placed inside v-expansion-panel");const{hasContent:n,onAfterLeave:s}=(0,W._)(e,o.isSelected);return(0,F.C)((()=>(0,a.bF)(D.Qo,{onAfterLeave:s},{default:()=>[(0,a.bo)((0,a.bF)("div",{class:["v-expansion-panel-text",e.class],style:e.style},[l.default&&n.value&&(0,a.bF)("div",{class:"v-expansion-panel-text__wrapper"},[l.default?.()])]),[[i.aG,o.isSelected.value]])]}))),{}}});var O=l(79669),U=l(32886),T=l(24581),I=l(759);const X=(0,k.j)({color:String,expandIcon:{type:T.TX,default:"$expand"},collapseIcon:{type:T.TX,default:"$collapse"},hideActions:Boolean,focusable:Boolean,static:Boolean,ripple:{type:[Boolean,Object],default:!1},readonly:Boolean,...(0,v.u)()},"VExpansionPanelTitle"),$=(0,x.RW)()({name:"VExpansionPanelTitle",directives:{Ripple:I.n},props:X(),setup(e,t){let{slots:l}=t;const o=(0,a.WQ)(V);if(!o)throw new Error("[Vuetify] v-expansion-panel-title needs to be placed inside v-expansion-panel");const{backgroundColorClasses:i,backgroundColorStyles:n}=(0,U.z6)(e,"color"),s=(0,a.EW)((()=>({collapseIcon:e.collapseIcon,disabled:o.disabled.value,expanded:o.isSelected.value,expandIcon:e.expandIcon,readonly:e.readonly})));return(0,F.C)((()=>(0,a.bo)((0,a.bF)("button",{class:["v-expansion-panel-title",{"v-expansion-panel-title--active":o.isSelected.value,"v-expansion-panel-title--focusable":e.focusable,"v-expansion-panel-title--static":e.static},i.value,e.class],style:[n.value,e.style],type:"button",tabindex:o.disabled.value?-1:void 0,disabled:o.disabled.value,"aria-expanded":o.isSelected.value,onClick:e.readonly?void 0:o.toggle},[(0,a.bF)("span",{class:"v-expansion-panel-title__overlay"},null),l.default?.(s.value),!e.hideActions&&(0,a.bF)("span",{class:"v-expansion-panel-title__icon"},[l.actions?l.actions(s.value):(0,a.bF)(O.w,{icon:o.isSelected.value?e.collapseIcon:e.expandIcon},null)])]),[[(0,a.gN)("ripple"),e.ripple]]))),{}}});var A=l(17018),R=l(73240);const B=(0,k.j)({title:String,text:String,bgColor:String,...(0,v.u)(),...(0,A.s)(),...(0,m.TX)(),...(0,W.f)(),...(0,R.S)(),...(0,h.X)(),...X()},"VExpansionPanel"),P=(0,x.RW)()({name:"VExpansionPanel",props:B(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:l}=t;const o=(0,m.aO)(e,V),{backgroundColorClasses:i,backgroundColorStyles:n}=(0,U.z6)(e,"bgColor"),{elevationClasses:s}=(0,A.j)(e),{roundedClasses:r}=(0,R.v)(e),d=(0,a.EW)((()=>o?.disabled.value||e.disabled)),u=(0,a.EW)((()=>o.group.items.value.reduce(((e,t,l)=>(o.group.selected.value.includes(t.id)&&e.push(l),e)),[]))),c=(0,a.EW)((()=>{const e=o.group.items.value.findIndex((e=>e.id===o.id));return!o.isSelected.value&&u.value.some((t=>t-e===1))})),p=(0,a.EW)((()=>{const e=o.group.items.value.findIndex((e=>e.id===o.id));return!o.isSelected.value&&u.value.some((t=>t-e===-1))}));return(0,a.Gt)(V,o),(0,f.Uh)({VExpansionPanelText:{eager:(0,y.lW)(e,"eager")},VExpansionPanelTitle:{readonly:(0,y.lW)(e,"readonly")}}),(0,F.C)((()=>{const t=!(!l.text&&!e.text),u=!(!l.title&&!e.title);return(0,a.bF)(e.tag,{class:["v-expansion-panel",{"v-expansion-panel--active":o.isSelected.value,"v-expansion-panel--before-active":c.value,"v-expansion-panel--after-active":p.value,"v-expansion-panel--disabled":d.value},r.value,i.value,e.class],style:[n.value,e.style]},{default:()=>[(0,a.bF)("div",{class:["v-expansion-panel__shadow",...s.value]},null),u&&(0,a.bF)($,{key:"title",collapseIcon:e.collapseIcon,color:e.color,expandIcon:e.expandIcon,hideActions:e.hideActions,ripple:e.ripple},{default:()=>[l.title?l.title():e.title]}),t&&(0,a.bF)(E,{key:"text"},{default:()=>[l.text?l.text():e.text]}),l.default?.()]})})),{}}});var j=l(41720),Q=l(72164),K=l(57254),J=l(4913),N=l(97505),G=l(32563);const z=(0,k.j)({...(0,G.EU)({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),q=(0,x.RW)()({name:"VRadio",props:z(),setup(e,t){let{slots:l}=t;return(0,F.C)((()=>(0,a.bF)(G._F,(0,a.v6)(e,{class:["v-radio",e.class],style:e.style,type:"radio"}),l))),{}}});var M=l(65035),H=l(28903),L=l(86506),Y=l(82067),Z=l(29094),ee=l(37861);const te=(0,k.j)({height:{type:[Number,String],default:"auto"},...(0,M.V)(),...(0,Z.cJ)((0,L.PO)(),["multiple"]),trueIcon:{type:T.TX,default:"$radioOn"},falseIcon:{type:T.TX,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),le=(0,x.RW)()({name:"VRadioGroup",inheritAttrs:!1,props:te(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:l,slots:o}=t;const i=(0,ee.v6)(),n=(0,a.EW)((()=>e.id||`radio-group-${i}`)),s=(0,Y.q)(e,"modelValue");return(0,F.C)((()=>{const[t,i]=(0,Z.ph)(l),r=M.Z.filterProps(e),d=G._F.filterProps(e),u=o.label?o.label({label:e.label,props:{for:n.value}}):e.label;return(0,a.bF)(M.Z,(0,a.v6)({class:["v-radio-group",e.class],style:e.style},t,r,{modelValue:s.value,"onUpdate:modelValue":e=>s.value=e,id:n.value}),{...o,default:t=>{let{id:l,messagesId:n,isDisabled:r,isReadonly:c}=t;return(0,a.bF)(a.FK,null,[u&&(0,a.bF)(H.N,{id:l.value},{default:()=>[u]}),(0,a.bF)(L.Hj,(0,a.v6)(d,{id:l.value,"aria-describedby":n.value,defaultsTarget:"VRadio",trueIcon:e.trueIcon,falseIcon:e.falseIcon,type:e.type,disabled:r.value,readonly:c.value,"aria-labelledby":u?l.value:void 0,multiple:!1},i,{modelValue:s.value,"onUpdate:modelValue":e=>s.value=e}),o)])}})})),{}}});var ae=l(20105),oe=l(51146),ie=l(10381),ne=l(76686),se=l(43948),re=l(53740);const de={class:"w-100"},ue={key:2},ce={key:3},pe={key:1,"min-width":"600"},be={key:0},ve={key:2},fe={key:3},me={key:4};function he(e,t,l,v,f,m){const h=(0,a.g2)("draggable");return(0,a.uX)(),(0,a.CE)("div",de,[(0,a.bF)(ie.h,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=t=>e.tab=t)},{default:(0,a.k6)((()=>[(0,a.bF)(ne.U,{value:"tables"},{default:(0,a.k6)((()=>[(0,a.eW)("Tables")])),_:1}),(0,a.bF)(ne.U,{value:"sections"},{default:(0,a.k6)((()=>[(0,a.eW)("Sections")])),_:1}),(0,a.bF)(ne.U,{value:"options"},{default:(0,a.k6)((()=>[(0,a.eW)("Options")])),_:1}),(0,a.bF)(ne.U,{value:"general"},{default:(0,a.k6)((()=>[(0,a.eW)("General")])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)(r.J,{loading:e.loading},{default:(0,a.k6)((()=>[e.error?((0,a.uX)(),(0,a.Wv)(n.l,{key:0,type:"error",text:e.error},null,8,["text"])):(0,a.Q3)("",!0),(0,a.bF)(d.S,null,{default:(0,a.k6)((()=>["tables"!==e.tab?((0,a.uX)(),(0,a.Wv)(s.D,{key:0,color:"primary",variant:"flat",onClick:m.save,disabled:!e.dirty},{default:(0,a.k6)((()=>[(0,a.eW)("Save")])),_:1},8,["onClick","disabled"])):(0,a.Q3)("",!0),"tables"===e.tab?((0,a.uX)(),(0,a.Wv)(s.D,{key:1,icon:"mdi-plus",onClick:t[1]||(t[1]=t=>{e.table={},e.tableDialog=!0})})):(0,a.Q3)("",!0),"sections"===e.tab?((0,a.uX)(),(0,a.CE)("span",ue,[(0,a.bF)(s.D,{icon:"mdi-plus",onClick:t[2]||(t[2]=t=>{e.section={},e.sectionDialog=!0})}),(0,a.bF)(s.D,{icon:"mdi-sort",title:"Sort",onClick:t[3]||(t[3]=t=>m.openSectionSortable(e.data.vars.sections))})])):(0,a.Q3)("",!0),"options"===e.tab?((0,a.uX)(),(0,a.CE)("span",ce,[(0,a.bF)(s.D,{icon:"mdi-plus",onClick:t[4]||(t[4]=t=>{e.option={name:""},e.optionDialog=!0})})])):(0,a.Q3)("",!0)])),_:1}),"tables"===e.tab?((0,a.uX)(),(0,a.CE)("div",pe,[(0,a.bF)(S,null,{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.data.tables,((l,n)=>((0,a.uX)(),(0,a.Wv)(P,{modelValue:e.panel,"onUpdate:modelValue":t[5]||(t[5]=t=>e.panel=t),multiple:"",key:n},{default:(0,a.k6)((()=>[(0,a.bF)($,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(n),1),(0,a.bF)(j.h),(0,a.bF)(s.D,{icon:"mdi-sort",title:"Sort",onClick:e=>m.openSortable(n,l)},null,8,["onClick"]),(0,a.bF)(s.D,{icon:"mdi-pencil",onClick:(0,i.D$)((t=>{e.table={id:n,name:n},e.tableDialog=!0}),["stop"])},null,8,["onClick"]),(0,a.bF)(s.D,{icon:"mdi-delete",onClick:(0,i.D$)((e=>m.deleteTable(n)),["stop"])},null,8,["onClick"])])),_:2},1024),(0,a.bF)(E,null,{default:(0,a.k6)((()=>[(0,a.bF)(r.J,null,{default:(0,a.k6)((()=>[(0,a.bF)(d.S,null,{default:(0,a.k6)((()=>[(0,a.bF)(s.D,{icon:"mdi-plus",onClick:t=>{e.field={name:"",type:"text",table:n},e.fieldDialog=!0}},null,8,["onClick"])])),_:2},1024),(0,a.bF)(Q.x,null,{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l,((t,l)=>((0,a.uX)(),(0,a.Wv)(K.g,{key:l},{append:(0,a.k6)((()=>[(0,a.bF)(s.D,{icon:"mdi-pencil",onClick:(0,i.D$)((l=>{e.field={...t},e.field.id=t.name,e.field.table=n,e.field.required=t.required>0,e.fieldDialog=!0}),["stop"])},null,8,["onClick"]),(0,a.bF)(s.D,{icon:"mdi-delete",onClick:(0,i.D$)((e=>m.deleteField(n,t.name)),["stop"])},null,8,["onClick"])])),default:(0,a.k6)((()=>[(0,a.bF)(J.U,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(t.name),1),t.required>0?((0,a.uX)(),(0,a.CE)("strong",be,"*")):(0,a.Q3)("",!0)])),_:2},1024),(0,a.bF)(N.w,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(t.type),1)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["modelValue"])))),128))])),_:1})])):(0,a.Q3)("",!0),"sections"===e.tab?((0,a.uX)(),(0,a.CE)("div",ve,[(0,a.bF)(S,{modelValue:e.panel,"onUpdate:modelValue":t[6]||(t[6]=t=>e.panel=t),multiple:""},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.data.vars.sections,((t,l)=>((0,a.uX)(),(0,a.Wv)(P,{key:l},{default:(0,a.k6)((()=>[(0,a.bF)($,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(t)+" ",1),(0,a.bF)(j.h),(0,a.bF)(s.D,{icon:"mdi-plus",onClick:(0,i.D$)((l=>{e.subsection={section:t},e.subsectionDialog=!0}),["stop"])},null,8,["onClick"]),(0,a.bF)(s.D,{icon:"mdi-sort",title:"Sort",onClick:(0,i.D$)((l=>m.openSectionSortable(e.data.vars.subsections[t])),["stop"]),disabled:!e.data.vars.subsections[t]||!e.data.vars.subsections[t].length},null,8,["onClick","disabled"]),(0,a.bF)(s.D,{icon:"mdi-pencil",onClick:(0,i.D$)((a=>{e.section={section:t,index:l},e.sectionDialog=!0}),["stop"])},null,8,["onClick"]),(0,a.bF)(s.D,{icon:"mdi-delete",onClick:(0,i.D$)((e=>m.deleteSection(l)),["stop"])},null,8,["onClick"])])),_:2},1024),(0,a.bF)(E,null,{default:(0,a.k6)((()=>[(0,a.bF)(Q.x,null,{default:(0,a.k6)((()=>[e.data.vars.subsections?((0,a.uX)(!0),(0,a.CE)(a.FK,{key:0},(0,a.pI)(e.data.vars.subsections[t],((l,o)=>((0,a.uX)(),(0,a.Wv)(K.g,{key:o,title:l},{append:(0,a.k6)((()=>[(0,a.bF)(s.D,{icon:"mdi-pencil",onClick:(0,i.D$)((a=>{e.subsection={section:t,subsection:l,index:o},e.subsectionDialog=!0}),["stop"])},null,8,["onClick"]),(0,a.bF)(s.D,{icon:"mdi-delete",onClick:(0,i.D$)((e=>m.deleteSubsection(t,o)),["stop"])},null,8,["onClick"])])),_:2},1032,["title"])))),128)):(0,a.Q3)("",!0)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["modelValue"])])):(0,a.Q3)("",!0),"options"===e.tab?((0,a.uX)(),(0,a.CE)("div",fe,[(0,a.bF)(Q.x,null,{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.data.vars.options,((e,t,l)=>((0,a.uX)(),(0,a.Wv)(K.g,{key:l,title:t},{append:(0,a.k6)((()=>[(0,a.bF)(s.D,{icon:"mdi-pencil",onClick:(0,i.D$)((e=>m.editOption(t)),["stop"])},null,8,["onClick"]),(0,a.bF)(s.D,{icon:"mdi-delete",onClick:(0,i.D$)((e=>m.deleteOption(t)),["stop"])},null,8,["onClick"])])),_:2},1032,["title"])))),128))])),_:1})])):(0,a.Q3)("",!0),"general"===e.tab?((0,a.uX)(),(0,a.CE)("div",me,[(0,a.bF)(se.W,{label:"From email",modelValue:e.data.from_email,"onUpdate:modelValue":t[7]||(t[7]=t=>e.data.from_email=t)},null,8,["modelValue"]),(0,a.bF)(se.W,{label:"Title",modelValue:e.data.vars.branding.title,"onUpdate:modelValue":t[8]||(t[8]=t=>e.data.vars.branding.title=t)},null,8,["modelValue"]),(0,a.bF)(se.W,{label:"Primary",modelValue:e.data.vars.branding.colors.primary,"onUpdate:modelValue":t[9]||(t[9]=t=>e.data.vars.branding.colors.primary=t),type:"color"},null,8,["modelValue"]),(0,a.bF)(se.W,{label:"Secondary",modelValue:e.data.vars.branding.colors.secondary,"onUpdate:modelValue":t[10]||(t[10]=t=>e.data.vars.branding.colors.secondary=t),type:"color"},null,8,["modelValue"])])):(0,a.Q3)("",!0)])),_:1},8,["loading"]),(0,a.bF)(b.p,{modelValue:e.tableDialog,"onUpdate:modelValue":t[12]||(t[12]=t=>e.tableDialog=t),"max-width":"600"},{default:(0,a.k6)((()=>[(0,a.bF)(r.J,{title:"Table"},{default:(0,a.k6)((()=>[(0,a.bF)(u.O,null,{default:(0,a.k6)((()=>[e.error?((0,a.uX)(),(0,a.Wv)(n.l,{key:0,type:"error",text:e.error},null,8,["text"])):(0,a.Q3)("",!0),(0,a.bF)(se.W,{label:"Name",modelValue:e.table.name,"onUpdate:modelValue":t[11]||(t[11]=t=>e.table.name=t)},null,8,["modelValue"])])),_:1}),(0,a.bF)(d.S,null,{default:(0,a.k6)((()=>[(0,a.bF)(s.D,{variant:"flat",color:"primary",disabled:""===e.table.name,onClick:m.saveTable},{default:(0,a.k6)((()=>[(0,a.eW)("Save")])),_:1},8,["disabled","onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)(b.p,{modelValue:e.fieldDialog,"onUpdate:modelValue":t[17]||(t[17]=t=>e.fieldDialog=t),"max-width":"600"},{default:(0,a.k6)((()=>[(0,a.bF)(r.J,{title:"Field"},{default:(0,a.k6)((()=>[(0,a.bF)(u.O,null,{default:(0,a.k6)((()=>[e.error?((0,a.uX)(),(0,a.Wv)(n.l,{key:0,type:"error",text:e.error},null,8,["text"])):(0,a.Q3)("",!0),(0,a.bF)(se.W,{label:"Name",modelValue:e.field.name,"onUpdate:modelValue":t[13]||(t[13]=t=>e.field.name=t)},null,8,["modelValue"]),(0,a.bF)(ae.d4,{label:"Field",modelValue:e.field.type,"onUpdate:modelValue":t[14]||(t[14]=t=>e.field.type=t),items:e.fieldTypes},null,8,["modelValue","items"]),(0,a.bF)(se.W,{label:"Label",modelValue:e.field.label,"onUpdate:modelValue":t[15]||(t[15]=t=>e.field.label=t)},null,8,["modelValue"]),(0,a.bF)(c.a,{label:"Required",modelValue:e.field.required,"onUpdate:modelValue":t[16]||(t[16]=t=>e.field.required=t)},null,8,["modelValue"])])),_:1}),(0,a.bF)(d.S,null,{default:(0,a.k6)((()=>[(0,a.bF)(s.D,{variant:"flat",color:"primary",disabled:""===e.field.name,onClick:m.saveField},{default:(0,a.k6)((()=>[(0,a.eW)("Save")])),_:1},8,["disabled","onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)(b.p,{modelValue:e.sortFieldsDialog,"onUpdate:modelValue":t[20]||(t[20]=t=>e.sortFieldsDialog=t),"max-width":"600",scrollable:""},{default:(0,a.k6)((()=>[(0,a.bF)(r.J,{title:"Sort Field Order"},{default:(0,a.k6)((()=>[(0,a.bF)(u.O,null,{default:(0,a.k6)((()=>[(0,a.bF)(h,{modelValue:e.sortOrder,"onUpdate:modelValue":t[18]||(t[18]=t=>e.sortOrder=t),group:"items",onStart:t[19]||(t[19]=t=>e.drag=!0),onEnd:m.moveField,"item-key":"name"},{item:(0,a.k6)((({element:e})=>[(0,a.bF)(oe.i,{color:"primary",class:"ma-5 pa-5"},{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(e.name),1)])),_:2},1024)])),_:1},8,["modelValue","onEnd"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)(b.p,{modelValue:e.sortSectionsDialog,"onUpdate:modelValue":t[22]||(t[22]=t=>e.sortSectionsDialog=t),"max-width":"600",scrollable:""},{default:(0,a.k6)((()=>[(0,a.bF)(r.J,{title:"Sort Section Order"},{default:(0,a.k6)((()=>[(0,a.bF)(u.O,null,{default:(0,a.k6)((()=>[(0,a.bF)(h,{list:e.sortOrder,group:"items","item-key":"",onEnd:t[21]||(t[21]=t=>e.dirty=!0)},{item:(0,a.k6)((({element:e})=>[(0,a.bF)(oe.i,{color:"primary",class:"ma-5 pa-5"},{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(e),1)])),_:2},1024)])),_:1},8,["list"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)(b.p,{modelValue:e.sectionDialog,"onUpdate:modelValue":t[24]||(t[24]=t=>e.sectionDialog=t),"max-width":"600"},{default:(0,a.k6)((()=>[(0,a.bF)(r.J,{title:"Section"},{default:(0,a.k6)((()=>[(0,a.bF)(u.O,null,{default:(0,a.k6)((()=>[e.error?((0,a.uX)(),(0,a.Wv)(n.l,{key:0,type:"error",text:e.error},null,8,["text"])):(0,a.Q3)("",!0),(0,a.bF)(p.A,{label:"Section",modelValue:e.section.section,"onUpdate:modelValue":t[23]||(t[23]=t=>e.section.section=t),items:Object.keys(e.data.tables)},null,8,["modelValue","items"])])),_:1}),(0,a.bF)(d.S,null,{default:(0,a.k6)((()=>[(0,a.bF)(s.D,{variant:"flat",color:"primary",disabled:""===e.section.section,onClick:m.saveSection},{default:(0,a.k6)((()=>[(0,a.eW)("Save")])),_:1},8,["disabled","onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)(b.p,{modelValue:e.subsectionDialog,"onUpdate:modelValue":t[26]||(t[26]=t=>e.subsectionDialog=t),"max-width":"600"},{default:(0,a.k6)((()=>[(0,a.bF)(r.J,{title:"Subsection"},{default:(0,a.k6)((()=>[(0,a.bF)(u.O,null,{default:(0,a.k6)((()=>[e.error?((0,a.uX)(),(0,a.Wv)(n.l,{key:0,type:"error",text:e.error},null,8,["text"])):(0,a.Q3)("",!0),(0,a.bF)(p.A,{label:"Subsection",modelValue:e.subsection.subsection,"onUpdate:modelValue":t[25]||(t[25]=t=>e.subsection.subsection=t),items:e.data.vars.sections},null,8,["modelValue","items"])])),_:1}),(0,a.bF)(d.S,null,{default:(0,a.k6)((()=>[(0,a.bF)(s.D,{variant:"flat",color:"primary",disabled:""===e.subsection.section,onClick:m.saveSubsection},{default:(0,a.k6)((()=>[(0,a.eW)("Save")])),_:1},8,["disabled","onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)(b.p,{modelValue:e.optionDialog,"onUpdate:modelValue":t[31]||(t[31]=t=>e.optionDialog=t),"max-width":"600"},{default:(0,a.k6)((()=>[(0,a.bF)(r.J,{title:"Option"},{default:(0,a.k6)((()=>[(0,a.bF)(u.O,null,{default:(0,a.k6)((()=>[e.error?((0,a.uX)(),(0,a.Wv)(n.l,{key:0,type:"error",text:e.error},null,8,["text"])):(0,a.Q3)("",!0),(0,a.bF)(se.W,{label:"Name",modelValue:e.option.name,"onUpdate:modelValue":t[27]||(t[27]=t=>e.option.name=t)},null,8,["modelValue"]),(0,a.bF)(le,{modelValue:e.option.type,"onUpdate:modelValue":t[28]||(t[28]=t=>e.option.type=t)},{default:(0,a.k6)((()=>[(0,a.bF)(q,{label:"Section",value:"section"}),(0,a.bF)(q,{label:"Options",value:"options"})])),_:1},8,["modelValue"]),"section"===e.option.type?((0,a.uX)(),(0,a.Wv)(ae.d4,{key:1,label:"section",modelValue:e.option.options,"onUpdate:modelValue":t[29]||(t[29]=t=>e.option.options=t),items:e.data.vars.sections},null,8,["modelValue","items"])):"options"===e.option.type?((0,a.uX)(),(0,a.Wv)(re.J,{key:2,label:"options",modelValue:e.option.options,"onUpdate:modelValue":t[30]||(t[30]=t=>e.option.options=t)},null,8,["modelValue"])):(0,a.Q3)("",!0)])),_:1}),(0,a.bF)(d.S,null,{default:(0,a.k6)((()=>[(0,a.bF)(s.D,{variant:"flat",color:"primary",disabled:""===e.option.name,onClick:m.saveOption},{default:(0,a.k6)((()=>[(0,a.eW)("Save")])),_:1},8,["disabled","onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}var ge=l(74300),ye=l(61527),ke=l.n(ye),xe={components:{draggable:ke()},props:{vars:null},data:function(){return{tab:"tables",panel:[],table:{},tableDialog:!1,field:{},fieldDialog:!1,data:{},error:"",loading:!1,fieldTypes:["avg_rating","checkbox","checkboxes","color","combo","coords","date","datetime","decimal","deleted","dob","editor","email","file","files","hidden","id","integer","ip","mobile","month","page_name","password","polygon","position","postcode","radio","rating","read","select","select_multiple","select_parent","tel","text","textarea","time","timestamp","upload","uploads","url"],drag:!1,sortFieldsDialog:!1,sortTable:"",sortOrder:[],sectionDialog:!1,section:{},subsectionDialog:!1,subsection:{},optionDialog:!1,option:{},sortSectionsDialog:!1,dirty:!1}},methods:{fetchData:async function(){const e=await ge.A.get("config.php");let t=e.data;t.vars||(t.vars={}),t.vars.subsections||(t.vars.subsections={}),t.vars.branding||(t.vars.branding={}),t.vars.branding.colors&&!Array.isArray(t.vars.branding.colors)||(t.vars.branding.colors={}),this.data=t,await this.$nextTick();let l=t.vars?.branding?.title?t.vars.branding.title:"ADMIN";document.title=l+" | Configure",this.dirty=!1},save:async function(){this.error="",this.loading=!0;const e=await ge.A.post("config.php?cmd=save",this.data);this.loading=!1,e.data.error?this.error=e.data.error:(await this.fetchData(),this.$emit("saveConfig"))},saveTable:async function(){this.error="",this.loading=!0;const e=await ge.A.post("config.php?cmd=save_table",this.table);this.loading=!1,e.data.error?this.error=e.data.error:(this.tableDialog=!1,this.fetchData())},deleteTable:async function(e){if(!confirm("Drop table "+e))return;this.error="",this.loading=!0;const t=await ge.A.post("config.php?cmd=delete_table",{table:e});this.loading=!1,t.data.error?this.error=t.data.error:this.fetchData()},saveField:async function(){this.error="",this.loading=!0;const e=await ge.A.post("config.php?cmd=save_field",this.field);this.loading=!1,e.data.error?this.error=e.data.error:(this.fieldDialog=!1,this.fetchData())},deleteField:async function(e,t){if(!confirm("Drop field "+t+" from "+e))return;this.error="",this.loading=!0;const l=await ge.A.post("config.php?cmd=delete_field",{table:e,field:t});this.loading=!1,l.data.error?this.error=l.data.error:this.fetchData()},openSortable:function(e,t){this.sortOrder=[...t],this.sortTable=e,this.sortFieldsDialog=!0},openSectionSortable:function(e){this.sortOrder=e,this.sortSectionsDialog=!0},moveField:async function(e){let t=this.sortOrder[e.newIndex].name,l=e.newIndex?this.sortOrder[e.newIndex-1].name:"";this.error="",this.loading=!0;const a=await ge.A.post("config.php?cmd=move_field",{table:this.sortTable,field:t,after:l});this.loading=!1,a.data.error?this.error=a.data.error:this.fetchData()},saveSection:function(){let e=this.section.section.replaceAll("_"," ");Object.hasOwn(this.section,"index")?this.data.vars.sections[this.section.index]=e:this.data.vars.sections.push(e),this.sectionDialog=!1,this.dirty=!0},deleteSection:function(e){confirm("Delete section")&&(this.data.vars.sections.splice(e,1),this.dirty=!0)},saveSubsection:function(){let e=this.subsection.subsection.replaceAll("_"," ");Object.hasOwn(this.subsection,"index")?this.data.vars.subsections[this.subsection.section][this.subsection.index]=e:(Array.isArray(this.data.vars.subsections[this.subsection.section])||(this.data.vars.subsections[this.subsection.section]=[]),this.data.vars.subsections[this.subsection.section].push(e)),this.subsectionDialog=!1,this.dirty=!0},deleteSubsection:function(e,t){confirm("Delete subsection")&&(this.data.vars.subsections[e].splice(t,1),this.dirty=!0)},renameObjKey:function(e,t,l){const a=Object.keys(e),o=a.reduce(((a,o)=>(o===t?a[l]=e[t]:a[o]=e[o],a)),{});return o},optionsToString:function(e){let t="";if(Array.isArray(e))e.forEach((function(e){t+=e+"\n"}));else if("object"===typeof e)for(let[l,a]of Object.entries(e))t+=l.replace("#","")+"="+a+"\n";else t=e;return t},editOption:function(e){this.option={name:e,index:e,type:"options"},"string"===typeof options&&(this.option.type="section"),this.option.options=this.optionsToString(this.data.vars.options[e]),this.optionDialog=!0,this.dirty=!0},saveOption:function(){let e;if("section"===this.option.type)e=this.option.options;else{let t=this.option.options.split("\n");e=t[0].includes("=")?{}:[],t.forEach((t=>{if(Array.isArray(e))e.push(t);else{let l=t.split("=");e[l[0]]=l[1]}}))}Object.hasOwn(this.option,"index")&&(this.data.vars.options=this.renameObjKey(this.data.vars.options,this.option.index,this.option.name)),this.data.vars.options[this.option.name]=e,this.optionDialog=!1,this.dirty=!0},deleteOption:function(e){confirm("Delete option")&&(delete this.data.vars.options[e],this.dirty=!0)}},watch:{vars:function(){this.fetchData()},data:{handler:function(){this.dirty=!0},deep:!0}},async mounted(){this.vars.sections&&this.fetchData()}},Fe=l(71241);const Ve=(0,Fe.A)(xe,[["render",he]]);var Ce=Ve},76686:function(e,t,l){l.d(t,{U:function(){return m}});var a=l(56768),o=l(42807),i=l(32886),n=l(61950),s=l(90144),r=l(93301),d=l(14587),u=l(29094),c=l(51247),p=l(2419),b=l(91884),v=l(74600);const f=(0,d.j)({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...(0,u.cJ)((0,o.x)({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),m=(0,c.RW)()({name:"VTab",props:f(),setup(e,t){let{slots:l,attrs:d}=t;const{textColorClasses:u,textColorStyles:c}=(0,i.aH)(e,"sliderColor"),f=(0,s.KR)(),m=(0,s.KR)(),h=(0,a.EW)((()=>"horizontal"===e.direction)),g=(0,a.EW)((()=>f.value?.group?.isSelected.value??!1));function y(e){let{value:t}=e;if(t){const e=f.value?.$el.parentElement?.querySelector(".v-tab--selected .v-tab__slider"),t=m.value;if(!e||!t)return;const l=getComputedStyle(e).color,a=e.getBoundingClientRect(),o=t.getBoundingClientRect(),i=h.value?"x":"y",n=h.value?"X":"Y",s=h.value?"right":"bottom",r=h.value?"width":"height",d=a[i],u=o[i],c=d>u?a[s]-o[s]:a[i]-o[i],v=Math.sign(c)>0?h.value?"right":"bottom":Math.sign(c)<0?h.value?"left":"top":"center",g=Math.abs(c)+(Math.sign(c)<0?a[r]:o[r]),y=g/Math.max(a[r],o[r])||0,k=a[r]/o[r]||0,x=1.5;(0,p.i)(t,{backgroundColor:[l,"currentcolor"],transform:[`translate${n}(${c}px) scale${n}(${k})`,`translate${n}(${c/x}px) scale${n}(${(y-1)/x+1})`,"none"],transformOrigin:Array(3).fill(v)},{duration:225,easing:b.B2})}}return(0,v.C)((()=>{const t=o.D.filterProps(e);return(0,a.bF)(o.D,(0,a.v6)({symbol:r.D,ref:f,class:["v-tab",e.class],style:e.style,tabindex:g.value?0:-1,role:"tab","aria-selected":String(g.value),active:!1},t,d,{block:e.fixed,maxWidth:e.fixed?300:void 0,"onGroup:selected":y}),{...l,default:()=>(0,a.bF)(a.FK,null,[l.default?.()??e.text,!e.hideSlider&&(0,a.bF)("div",{ref:m,class:["v-tab__slider",u.value],style:c.value},null)])})})),(0,n.O)({},f)}})},10381:function(e,t,l){l.d(t,{h:function(){return y}});var a=l(56768),o=l(76686),i=l(84062),n=l(32886),s=l(12858),r=l(62191),d=l(82067),u=l(54663),c=l(90144),p=l(29094),b=l(14587),v=l(51247),f=l(74600),m=l(93301);function h(e){return e?e.map((e=>(0,p.Gv)(e)?e:{text:e,value:e})):[]}const g=(0,b.j)({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...(0,i.l9)({mandatory:"force"}),...(0,r.r)(),...(0,u.X)()},"VTabs"),y=(0,v.RW)()({name:"VTabs",props:g(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:l}=t;const u=(0,d.q)(e,"modelValue"),b=(0,a.EW)((()=>h(e.items))),{densityClasses:v}=(0,r.Q)(e),{backgroundColorClasses:g,backgroundColorStyles:y}=(0,n.z6)((0,c.lW)(e,"bgColor"));return(0,s.Uh)({VTab:{color:(0,c.lW)(e,"color"),direction:(0,c.lW)(e,"direction"),stacked:(0,c.lW)(e,"stacked"),fixed:(0,c.lW)(e,"fixedTabs"),sliderColor:(0,c.lW)(e,"sliderColor"),hideSlider:(0,c.lW)(e,"hideSlider")}}),(0,f.C)((()=>{const t=i.fJ.filterProps(e);return(0,a.bF)(i.fJ,(0,a.v6)(t,{modelValue:u.value,"onUpdate:modelValue":e=>u.value=e,class:["v-tabs",`v-tabs--${e.direction}`,`v-tabs--align-tabs-${e.alignTabs}`,{"v-tabs--fixed-tabs":e.fixedTabs,"v-tabs--grow":e.grow,"v-tabs--stacked":e.stacked},v.value,g.value,e.class],style:[{"--v-tabs-height":(0,p.Dg)(e.height)},y.value,e.style],role:"tablist",symbol:m.D}),{default:()=>[l.default?l.default():b.value.map((e=>(0,a.bF)(o.U,(0,a.v6)(e,{key:e.text}),null)))]})})),{}}})},93301:function(e,t,l){l.d(t,{D:function(){return a}});const a=Symbol.for("vuetify:v-tabs")},53740:function(e,t,l){l.d(t,{J:function(){return g}});var a=l(56768),o=l(45130),i=(l(92936),l(31622)),n=l(54577),s=l(65035),r=l(76935),d=l(61950),u=l(82067),c=l(19629),p=l(90144),b=l(14587),v=l(51247),f=l(29094),m=l(74600);const h=(0,b.j)({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...(0,s.V)(),...(0,n.tG)()},"VTextarea"),g=(0,v.RW)()({name:"VTextarea",directives:{Intersect:c.A},inheritAttrs:!1,props:h(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:l,emit:c,slots:b}=t;const v=(0,u.q)(e,"modelValue"),{isFocused:h,focus:g,blur:y}=(0,r.i)(e),k=(0,a.EW)((()=>"function"===typeof e.counterValue?e.counterValue(v.value):(v.value||"").toString().length)),x=(0,a.EW)((()=>l.maxlength?l.maxlength:!e.counter||"number"!==typeof e.counter&&"string"!==typeof e.counter?void 0:e.counter));function F(t,l){e.autofocus&&t&&l[0].target?.focus?.()}const V=(0,p.KR)(),C=(0,p.KR)(),_=(0,p.IJ)(""),S=(0,p.KR)(),D=(0,a.EW)((()=>e.persistentPlaceholder||h.value||e.active));function W(){S.value!==document.activeElement&&S.value?.focus(),h.value||g()}function w(e){W(),c("click:control",e)}function E(e){c("mousedown:control",e)}function O(t){t.stopPropagation(),W(),(0,a.dY)((()=>{v.value="",(0,f.P)(e["onClick:clear"],t)}))}function U(t){const l=t.target;if(v.value=l.value,e.modelModifiers?.trim){const e=[l.selectionStart,l.selectionEnd];(0,a.dY)((()=>{l.selectionStart=e[0],l.selectionEnd=e[1]}))}}const T=(0,p.KR)(),I=(0,p.KR)(+e.rows),X=(0,a.EW)((()=>["plain","underlined"].includes(e.variant)));function $(){e.autoGrow&&(0,a.dY)((()=>{if(!T.value||!C.value)return;const t=getComputedStyle(T.value),l=getComputedStyle(C.value.$el),a=parseFloat(t.getPropertyValue("--v-field-padding-top"))+parseFloat(t.getPropertyValue("--v-input-padding-top"))+parseFloat(t.getPropertyValue("--v-field-padding-bottom")),o=T.value.scrollHeight,i=parseFloat(t.lineHeight),n=Math.max(parseFloat(e.rows)*i+a,parseFloat(l.getPropertyValue("--v-input-control-height"))),s=parseFloat(e.maxRows)*i+a||1/0,r=(0,f.qE)(o??0,n,s);I.value=Math.floor((r-a)/i),_.value=(0,f.Dg)(r)}))}let A;return(0,a.nT)((()=>{e.autoGrow||(I.value=+e.rows)})),(0,a.sV)($),(0,a.wB)(v,$),(0,a.wB)((()=>e.rows),$),(0,a.wB)((()=>e.maxRows),$),(0,a.wB)((()=>e.density),$),(0,a.wB)(T,(e=>{e?(A=new ResizeObserver($),A.observe(T.value)):A?.disconnect()})),(0,a.xo)((()=>{A?.disconnect()})),(0,m.C)((()=>{const t=!!(b.counter||e.counter||e.counterValue),r=!(!t&&!b.details),[d,u]=(0,f.ph)(l),{modelValue:c,...p}=s.Z.filterProps(e),m=(0,n.jz)(e);return(0,a.bF)(s.Z,(0,a.v6)({ref:V,modelValue:v.value,"onUpdate:modelValue":e=>v.value=e,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-input--plain-underlined":X.value},e.class],style:e.style},d,p,{centerAffix:1===I.value&&!X.value,focused:h.value}),{...b,default:t=>{let{id:l,isDisabled:i,isDirty:s,isReadonly:r,isValid:d}=t;return(0,a.bF)(n.xR,(0,a.v6)({ref:C,style:{"--v-textarea-control-height":_.value},onClick:w,onMousedown:E,"onClick:clear":O,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},m,{id:l.value,active:D.value||s.value,centerAffix:1===I.value&&!X.value,dirty:s.value||e.dirty,disabled:i.value,focused:h.value,error:!1===d.value}),{...b,default:t=>{let{props:{class:l,...n}}=t;return(0,a.bF)(a.FK,null,[e.prefix&&(0,a.bF)("span",{class:"v-text-field__prefix"},[e.prefix]),(0,a.bo)((0,a.bF)("textarea",(0,a.v6)({ref:S,class:l,value:v.value,onInput:U,autofocus:e.autofocus,readonly:r.value,disabled:i.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:W,onBlur:y},n,u),null),[[(0,a.gN)("intersect"),{handler:F},null,{once:!0}]]),e.autoGrow&&(0,a.bo)((0,a.bF)("textarea",{class:[l,"v-textarea__sizer"],id:`${n.id}-sizer`,"onUpdate:modelValue":e=>v.value=e,ref:T,readonly:!0,"aria-hidden":"true"},null),[[o.Jo,v.value]]),e.suffix&&(0,a.bF)("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:r?l=>(0,a.bF)(a.FK,null,[b.details?.(l),t&&(0,a.bF)(a.FK,null,[(0,a.bF)("span",null,null),(0,a.bF)(i.p,{active:e.persistentCounter||h.value,value:k.value,max:x.value},b.counter)])]):void 0})})),(0,d.O)({},V,C,S)}})}}]);
//# sourceMappingURL=410.fa83ed6c.js.map