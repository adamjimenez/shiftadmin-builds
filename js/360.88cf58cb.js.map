{"version":3,"file":"js/360.88cf58cb.js","mappings":"oMACSA,MAAA,mCAAyCC,MAAM,sB,EADxD,Q,0CACIC,EAAAA,EAAAA,IAKM,MALNC,EAKM,CAJqCC,EAAAC,YAAS,WAAhDC,EAAAA,EAAAA,IAAsEC,EAAAA,EAAA,CAF9EC,IAAA,EAE2BC,cAAA,OAF3BC,EAAAA,EAAAA,IAAA,OAIsBN,EAAAO,SAAM,WAApBT,EAAAA,EAAAA,IAC6C,UALrDM,IAAA,EAI+BI,IAAKC,EAAAC,SAAUd,MAAA,wCAClCC,MAAM,OAAQc,UAAOC,EAAA,KAAAA,EAAA,OAAAC,IAAEb,EAAAc,SAAAd,EAAAc,WAAAD,K,QALnCE,KAAAT,EAAAA,EAAAA,IAAA,Q,wDAcA,GACIU,KAAM,WACF,MAAO,CACHT,OAAQ,GACRN,WAAW,EAEnB,EACAgB,iBAAAA,GACIC,KAAKC,SAAU,CACnB,EACAC,SAAU,CACNV,SAAU,WACN,IAAIW,EAASH,KAAKI,OAAOC,MACzBF,EAAOG,MAAQ,EAEf,IAAIC,EAAcC,IAAAA,UAAaR,KAAKI,OAAOC,OAE3C,OAAOL,KAAKX,OAAS,SAAWW,KAAKI,OAAOD,OAAOM,SAAW,IAAMF,CACxE,GAEJG,QAAS,CACLC,eAAgB,SAAUf,GAOtB,GANAgB,QAAQC,IAAIjB,EAAQE,MAEhBF,EAAQE,KAAKgB,IACbd,KAAKe,QAAQC,KAAKpB,EAAQE,KAAKgB,IAG/BlB,EAAQE,KAAKmB,IAAK,CAClB,IAAIH,EAAKlB,EAAQE,KAAKmB,IAEjBH,EAAGI,SAAS,SACbJ,EAAKK,EAAAA,EAAKC,OAASN,EAAGO,QAAQrB,KAAKX,OAAS,UAAUiC,SAG1DtB,KAAKe,QAAQC,KAAKF,EACtB,CAEuC,mBAA5BlB,EAAQE,KAAKyB,YACpBvB,KAAKwB,MAAM,UAAW5B,EAAQE,MAGE,mBAAzBF,EAAQE,KAAKG,UACpBD,KAAKjB,UAAYa,EAAQE,KAAKG,QAEtC,GAEJwB,MAAO,CACHjC,SAAU,WACNQ,KAAKjB,WAAY,CACrB,GAEJ,aAAM2C,GACG,CAAC,MAAO,WAAY,SAASR,SAASC,EAAAA,EAAKQ,eAKhD3B,KAAKX,OAASuC,EAAAA,EAAIC,YAClBC,OAAOC,iBAAiB,UAAW/B,KAAKW,gBAExCX,KAAKwB,MAAM,eAAgB,KAPvBxB,KAAKe,QAAQC,KAAKG,EAAAA,EAAKC,OAAS,UAQxC,EACAY,aAAAA,GACIF,OAAOG,oBAAoB,UAAWjC,KAAKW,eAC/C,G,WC1EJ,MAAMuB,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,O","sources":["webpack://shiftadmin/./src/components/IframePage.vue","webpack://shiftadmin/./src/components/IframePage.vue?db86"],"sourcesContent":["<template>\n    <div style=\"position: relative; width: 100%;\" class=\"d-flex flex-column\">\n        <v-progress-linear indeterminate v-if=\"isLoading\"></v-progress-linear>\n\n        <iframe v-if=\"webUrl\" :src=\"frameUrl\" style=\"border:0; width: 100%; height: 100%;\"\n            class=\"grow\" @message=\"message\"></iframe>\n    </div>\n</template>\n\n<script>\nimport api from \"../services/api\";\nimport util from \"../services/util\";\nimport qs from 'qs';\n\nexport default {\n    data: function () {\n        return {\n            webUrl: '',\n            isLoading: false,\n        };\n    },\n    beforeRouteUpdate () {\n        this.loading = true;\n    },\n    computed: {\n        frameUrl: function () {\n            let params = this.$route.query;\n            params.frame = 1;\n\n            let paramString = qs.stringify(this.$route.query);\n\n            return this.webUrl + 'admin/' + this.$route.params.catchAll + '?' + paramString;\n        }\n    },\n    methods: {\n        receiveMessage: function (message) { \n            console.log(message.data);\n\n            if (message.data.to) {\n                this.$router.push(message.data.to);\n            }\n            \n            if (message.data.url) {\n                let to = message.data.url;\n\n                if (!to.includes('://')) {\n                    to = util.base() + to.substr((this.webUrl + 'admin/').length);\n                }\n\n                this.$router.push(to);\n            }\n            \n            if (typeof message.data.fullScreen === 'boolean') {\n                this.$emit('message', message.data);\n            }\n            \n            if (typeof message.data.loading === 'boolean') {\n                this.isLoading = message.data.loading;\n            }\n        },\n    },\n    watch: {\n        frameUrl: function () {\n            this.isLoading = true;\n        }\n    },\n    async mounted() {\n        if (!['Pro', 'Business', 'Trial'].includes(util.getEdition())) {\n            this.$router.push(util.base() + 'upgrade');\n            return;\n        }\n\n        this.webUrl = api.getWebUrl();\n        window.addEventListener('message', this.receiveMessage);\n\n        this.$emit('changeFields', []);\n    },\n    beforeUnmount() {\n        window.removeEventListener('message', this.receiveMessage);\n    }, \n};\n</script>\n","import { render } from \"./IframePage.vue?vue&type=template&id=1e2edc76\"\nimport script from \"./IframePage.vue?vue&type=script&lang=js\"\nexport * from \"./IframePage.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["style","class","_createElementBlock","_hoisted_1","_ctx","isLoading","_createBlock","_component_v_progress_linear","key","indeterminate","_createCommentVNode","webUrl","src","$options","frameUrl","onMessage","_cache","args","message","_hoisted_2","data","beforeRouteUpdate","this","loading","computed","params","$route","query","frame","paramString","qs","catchAll","methods","receiveMessage","console","log","to","$router","push","url","includes","util","base","substr","length","fullScreen","$emit","watch","mounted","getEdition","api","getWebUrl","window","addEventListener","beforeUnmount","removeEventListener","__exports__","render"],"sourceRoot":""}