{"version":3,"file":"js/975.34f4c853.js","mappings":"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","sources":["webpack://shiftadmin/./src/components/LoginPage.vue","webpack://shiftadmin/./src/components/LoginPage.vue?8d24"],"sourcesContent":["<template>\n    <v-form ref=\"form\" v-model=\"valid\">\n        <v-card title=\"GenieAdmin\" subtitle=\"Sign in\" :loading=\"loading\">\n            <v-alert v-if=\"error\" type=\"error\" :text=\"error\" />\n            <v-alert v-if=\"message\" type=\"info\" :text=\"message\" />\n\n            <v-card-text v-if=\"data.code !== 2 && error !== 'invalid'\">\n                <div v-if=\"data.trusted === false\">\n                    <div v-if=\"!data.otp_sent\">\n                        <v-radio-group v-model=\"otpMethod\" class=\"mb-3\">                            \n                            <v-radio value=\"email\">\n                                <template v-slot:label>\n                                    <div>\n                                        <div class=\"mb-2\">Email me a code</div>\n                                        <strong>{{data.email}}</strong>\n                                    </div>\n                                </template>\n                            </v-radio>\n                        </v-radio-group>\n                    </div>\n                    <div v-else>\n                        <p>\n                            An OTP has been sent to you, please enter the code below.\n                        </p>\n\n                        <v-otp-input\n                            v-model=\"otp\"\n                            :disabled=\"loading\"\n                            @finish=\"fetchData\"\n                            :length=\"otpLength\"\n                            autofocus\n                            type=\"password\"\n                            ></v-otp-input>\n                    </div>\n                </div>\n\n                <div v-else-if=\"data.code !== 1 && data.code !== 2 && error !== 'invalid'\">\n                    <v-text-field v-if=\"!query.code\" v-model=\"email\" :rules=\"usernameRules\" label=\"Email\"\n                        required></v-text-field>\n                    <v-text-field v-if=\"!reset || query.code\" type=\"password\" v-model=\"password\" :rules=\"passwordRules\"\n                        label=\"Password\" required></v-text-field>\n                    <v-btn v-if=\"!reset && !query.code && !data.no_admin\" @click=\"reset = true\" variant=\"text\">Forgot password</v-btn>\n                </div>\n            </v-card-text>\n\n            <v-card-actions>\n                <v-btn v-if=\"data.code !== 2\" color=\"success\" @click=\"fetchData()\" variant=\"flat\"\n                    :text=\"submitText\" type=\"button\" :disabled=\"!isValid\" />\n                <v-btn v-if=\"reset && data.code !== 2\" @click=\"reset = false\" :to=\"base + 'login'\"\n                    variant=\"text\">Cancel</v-btn>\n                    <v-spacer></v-spacer>\n                <v-btn v-if=\"data.code === 1\" @click=\"logout\">Logout</v-btn>\n            </v-card-actions>\n        </v-card>\n    </v-form>\n</template>\n\n<script>\n/*\ncode 1: logged in\ncode 2: reset email sent\ncode 3: password reset\n*/\n\nimport api from \"../services/api\";\nimport util from \"../services/util\";\n\nexport default {\n    data: () => ({\n        valid: true,\n        email: \"\",\n        password: \"\",\n        usernameRules: [(v) => !!v || \"Email is required\"],\n        passwordRules: [(v) => !!v || \"Password is required\"],\n        loading: false,\n        error: \"\",\n        message: \"\",\n        query: {},\n        data: {},\n        reset: false,\n        otpMethod: \"\",\n        otpSent: false,\n        otpLength: 4,\n        otp: '',\n    }),\n\n    methods: {\n        fetchData: async function () {\n            this.query = this.$route.query;\n\n            if (this.query.code) {\n                this.reset = true;\n            }\n\n            let data = {\n                cmd: 'login',\n                email: this.email,\n                password: this.password,\n                query: this.query,\n                reset: this.reset,\n                otp: this.otp,\n                otp_method: this.otpMethod,\n            };\n\n            this.error = '';\n            this.message = '';\n            this.loading = true;\n            const result = await api.post('?cmd=login', data);\n            this.loading = false;\n            this.login = false;\n\n            this.data = result.data;\n\n            if (result.data.error) {\n                this.error = result.data.error;\n            } else {\n                if (result.data.message) {\n                    this.message = result.data.message;\n                }\n\n                if (this.data.code === 1) {\n                    if (result.data.admin && result.data.trusted !== false) {\n                        this.$router.push(util.base());\n                    } else if (this.reset) {\n                        this.reset = false;\n                        this.$router.push(util.base() + 'login')\n                    }\n                }\n            }\n        },\n        logout: async function () {\n            this.error = '';\n            this.message = '';\n            this.email = '';\n            this.password = '';\n            this.loading = true;\n            const result = await api.post('?cmd=logout');\n            this.loading = false;\n            this.data = result.data;\n\n            this.fetchData();\n        },\n    },\n\n    mounted: function () {\n        this.fetchData();\n    },\n\n    watch: {\n        $route() {\n            this.fetchData();\n        }\n    },\n\n    computed: {\n        base() {\n            return util.base();\n        },\n        isValid() {\n            return this.valid;\n        },\n        submitText() {\n            if (this.data.code === 3) {\n                return 'Set password and login';\n            } else if (this.reset) {\n                return 'Send password reminder';\n            } else if (this.data.trusted === false) {\n                return 'Next';\n            } else if (this.data.no_admin) {\n                return 'Create account';\n            }\n\n            return 'Log in';\n        },\n    }\n}\n</script>","import { render } from \"./LoginPage.vue?vue&type=template&id=b1c14a24\"\nimport script from \"./LoginPage.vue?vue&type=script&lang=js\"\nexport * from \"./LoginPage.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["key","_createBlock","_component_v_form","ref","modelValue","_ctx","valid","_cache","$event","default","_withCtx","_createVNode","_component_v_card","title","subtitle","loading","error","_component_v_alert","type","text","_createCommentVNode","message","data","code","_component_v_card_text","trusted","_createElementBlock","_hoisted_1","otp_sent","_hoisted_3","_createElementVNode","_component_v_otp_input","otp","disabled","onFinish","$options","fetchData","length","otpLength","autofocus","_hoisted_2","_component_v_radio_group","otpMethod","class","_component_v_radio","value","label","_toDisplayString","email","_","_hoisted_4","query","_component_v_text_field","rules","usernameRules","required","reset","password","passwordRules","no_admin","_component_v_btn","onClick","variant","_createTextVNode","_component_v_card_actions","color","submitText","isValid","to","base","_component_v_spacer","logout","v","otpSent","methods","async","this","$route","cmd","otp_method","result","api","post","login","admin","$router","push","util","mounted","watch","computed","__exports__","render"],"sourceRoot":""}